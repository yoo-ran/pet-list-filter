<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #container {
            background-color: #ccc;
            width: 90%;
            height: 100vh;
            margin: 0 auto;
        }

        .box{
            background-color: yellow;
            width: 10%;
            height: 10vh;
        }

        p{
            background-color: red;
        }
    </style>
</head>
<body>

        <button type='button' class='species' data-species="" onclick='test(event)'>All</button>
        <button type='button' class='species' data-species="cat" onclick='test(event)'>Cat</button>
        <button type='button' class='species' data-species="dog" onclick='test(event)'>Dog</button>
        <button type='button' class='species' data-species="fish" onclick='test(event)'>Fish</button>
        <!-- <input type="checkbox" class='gender all' value='cat' data-gender="" onclick='test(event)'> All</input>
        <input type="checkbox" class='gender male' value='dog' data-gender="male" onclick='test(event)'> Male</input>
        <input type="checkbox" class='gender female' value='fish' data-gender="female" onclick='test(event)'> Female</input>
     -->
    
    
    <div id='container'>
    </div>

    <button id='reset'>reset</button>
    <button id='display' >display</button>
    

    <script>
        let speciesArr = [];
        let item = localStorage.getItem("obj")
        let localArr = JSON.parse(sessionStorage.getItem("objLocal"))

        const obj = [
            {"fname":"Yooran", "lname":"Kim", "num":10, "species":"cat"},
            {"fname":"Mike", "lname":"Lee", "num":20,"species":"dog"},
            {"fname":"aa", "lname":"bb", "num":30,"species":"dog"},
            {"fname":"Barry", "lname":"Choi", "num":40,"species":"fish"}
        ]


        
        const test = (e) => {
            
            console.log(localArr);
            localArr.forEach(element => {
                console.log(element);
                if(element!=e.target.dataset.species){
                    console.log("yes");
                }
            })
            
            
            speciesArr.push(e.target.dataset.species)
            
            sessionStorage.setItem("objLocal",JSON.stringify(speciesArr))
            
            console.log(localArr);
            
            document.querySelector("#container").innerHTML = ""
            // // 리프레시한상태에서도 남아있게
            


            obj.map((item,id)=>{
                    // console.log(item);
                    // console.log(item.fname);
                    // console.log(id);

                    localArr.map(localSpecies => {

                        if(item.species==localSpecies){
                            console.log(item);

                            let box = document.createElement("div");
                            let p = document.createElement("p")
                            let span = document.createElement("span")

                            p.innerText = item.fname
                            span.innerText= item.species

                            // box추가
                            box.className = "box"
                            box.append(p,span)
                            document.querySelector("#container").append(box)
                        }
                    })
        
        })
            
            
    }

        

        const reset = () => {
            document.querySelector("#container").innerHTML = ""
        }

        const displayBox = () => {
            // reset function

            // data 가져오기
            obj.map((item,id)=>{
                console.log(item);
                console.log(item.fname);
                console.log(id);

                let box = document.createElement("div");
                let p = document.createElement("p")
                let span = document.createElement("span")

                p.innerText = item.fname
                span.innerText= item.lname

                // box추가
                box.className = "box"
                box.append(p,span)
                document.querySelector("#container").append(box)
            })

            // 디스플레이

        }
        

        document.querySelector("#reset").addEventListener("click",reset)
        document.querySelector("#display").addEventListener("click",displayBox)
    </script>
</body>
</html>